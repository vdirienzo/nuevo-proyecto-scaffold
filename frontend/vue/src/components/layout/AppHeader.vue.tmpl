<!--
  AppHeader.vue - Application header
  @author {{AUTHOR}}
  @project {{PROJECT_NAME}}
-->

<script setup lang="ts">
import { useAuthStore } from '@/stores/auth'
import { useUiStore } from '@/stores/ui'
import { useAuth } from '@/composables/useAuth'

const authStore = useAuthStore()
const uiStore = useUiStore()
const { logout } = useAuth()

const handleLogout = () => {
  logout()
}
</script>

<template>
  <header class="bg-white border-b border-gray-200 shadow-sm">
    <div class="px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <!-- Left side -->
        <div class="flex items-center gap-4">
          <button
            v-if="authStore.isAuthenticated"
            type="button"
            class="text-gray-500 hover:text-gray-700"
            @click="uiStore.toggleSidebar"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>

          <h1 class="text-xl font-bold text-gray-900">
            {{PROJECT_NAME}}
          </h1>
        </div>

        <!-- Right side -->
        <div class="flex items-center gap-4">
          <template v-if="authStore.isAuthenticated">
            <!-- User dropdown -->
            <div class="relative">
              <div class="flex items-center gap-3">
                <span class="text-sm font-medium text-gray-700">
                  {{ authStore.user?.email }}
                </span>
                <button
                  type="button"
                  class="px-4 py-2 text-sm text-gray-700 hover:text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-50"
                  @click="handleLogout"
                >
                  Logout
                </button>
              </div>
            </div>
          </template>

          <template v-else>
            <RouterLink
              to="/login"
              class="px-4 py-2 text-sm text-gray-700 hover:text-gray-900"
            >
              Login
            </RouterLink>
            <RouterLink
              to="/register"
              class="px-4 py-2 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700"
            >
              Sign Up
            </RouterLink>
          </template>
        </div>
      </div>
    </div>
  </header>
</template>
