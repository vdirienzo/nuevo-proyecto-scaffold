/**
 * config.js - Application configuration
 * @author {{AUTHOR}}
 * @project {{PROJECT_NAME}}
 */

/**
 * Get environment variable from window or process.env
 * @param {string} key - Environment variable key
 * @param {*} defaultValue - Default value if not found
 * @returns {*} Environment variable value
 */
const getEnv = (key, defaultValue = '') => {
    // Try window._env_ first (injected by nginx/docker)
    if (typeof window !== 'undefined' && window._env_ && window._env_[key]) {
        return window._env_[key];
    }

    // Try process.env (bundler)
    if (typeof process !== 'undefined' && process.env && process.env[key]) {
        return process.env[key];
    }

    return defaultValue;
};

/**
 * Application configuration object
 */
export const config = {
    // API Configuration
    API_URL: getEnv('API_URL', 'http://localhost:8000'),
    API_TIMEOUT: parseInt(getEnv('API_TIMEOUT', '30000'), 10),

    // Application
    APP_NAME: getEnv('APP_NAME', '{{PROJECT_NAME}}'),
    APP_ENV: getEnv('APP_ENV', 'development'),

    // Features
    ENABLE_ANALYTICS: getEnv('ENABLE_ANALYTICS', 'false') === 'true',
    ENABLE_DEBUG: getEnv('ENABLE_DEBUG', 'true') === 'true',

    // Authentication
    TOKEN_STORAGE_KEY: getEnv('TOKEN_STORAGE_KEY', 'auth_token'),
    REFRESH_TOKEN_KEY: getEnv('REFRESH_TOKEN_KEY', 'refresh_token'),

    // API Endpoints
    endpoints: {
        auth: {
            login: '/auth/login',
            logout: '/auth/logout',
            refresh: '/auth/refresh',
            me: '/auth/me'
        },
        users: {
            list: '/users',
            create: '/users',
            get: (id) => `/users/${id}`,
            update: (id) => `/users/${id}`,
            delete: (id) => `/users/${id}`
        }
    }
};

/**
 * Check if running in development mode
 * @returns {boolean}
 */
export const isDevelopment = () => config.APP_ENV === 'development';

/**
 * Check if running in production mode
 * @returns {boolean}
 */
export const isProduction = () => config.APP_ENV === 'production';

/**
 * Log only in development mode
 * @param {...any} args - Arguments to log
 */
export const devLog = (...args) => {
    if (config.ENABLE_DEBUG) {
        console.log('[DEBUG]', ...args);
    }
};

export default config;
