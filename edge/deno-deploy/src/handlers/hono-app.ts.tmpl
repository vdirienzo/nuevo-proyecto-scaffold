/**
 * hono-app.ts - Alternative Hono framework setup
 *
 * Author: {{AUTHOR}}
 *
 * This is an alternative to Oak. Use this if you prefer Hono's API.
 * To use Hono instead of Oak, replace app.ts imports.
 */

import { Hono } from "hono";
import { cors } from "hono/cors";
import { logger } from "hono/logger";
import { jwt } from "hono/jwt";

const app = new Hono();

// Middleware
app.use("*", logger());
app.use(
  "*",
  cors({
    origin: Deno.env.get("ALLOWED_ORIGINS")?.split(",") || ["*"],
    credentials: true,
  }),
);

// Health check
app.get("/health", (c) => {
  return c.json({
    status: "healthy",
    timestamp: new Date().toISOString(),
    service: "{{PROJECT_NAME}}",
  });
});

// Protected routes
const JWT_SECRET = Deno.env.get("JWT_SECRET") || "change-me-in-production";

app.use("/api/*", jwt({ secret: JWT_SECRET }));

// API routes
app.get("/api/items", async (c) => {
  // Implementation here
  return c.json({ items: [] });
});

app.post("/api/items", async (c) => {
  const body = await c.req.json();
  // Implementation here
  return c.json({ success: true, data: body }, 201);
});

// Auth routes
app.post("/auth/login", async (c) => {
  const { email, password } = await c.req.json();
  // Implementation here
  return c.json({ success: true, token: "..." });
});

// Start server
Deno.serve({ port: 8000 }, app.fetch);

export { app };
