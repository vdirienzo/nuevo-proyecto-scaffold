/**
 * user.resolver.ts - User GraphQL Resolver
 *
 * Author: {{AUTHOR}}
 * Project: {{PROJECT_NAME}}
 */

import { Resolver, Query, Args, ID } from '@nestjs/graphql';
import { UseGuards } from '@nestjs/common';
import { User } from '../models/user.model';
import { GqlAuthGuard } from '../guards/gql-auth.guard';
import { CurrentUser } from '../decorators/current-user.decorator';

@Resolver(() => User)
export class UserResolver {
  constructor(
    // Inject your UserService here
    // private readonly userService: UserService,
  ) {}

  @Query(() => User, { description: 'Get current authenticated user' })
  @UseGuards(GqlAuthGuard)
  async me(@CurrentUser() user: User): Promise<User> {
    return user;
  }

  @Query(() => User, { nullable: true, description: 'Get user by ID' })
  @UseGuards(GqlAuthGuard)
  async user(@Args('id', { type: () => ID }) id: string): Promise<User | null> {
    // return await this.userService.findById(id);

    // Placeholder implementation
    return {
      id,
      email: 'user@example.com',
      name: 'John Doe',
      createdAt: new Date(),
      updatedAt: new Date(),
    };
  }

  @Query(() => [User], { description: 'List all users' })
  @UseGuards(GqlAuthGuard)
  async users(
    @Args('skip', { type: () => Number, defaultValue: 0 }) skip: number,
    @Args('take', { type: () => Number, defaultValue: 10 }) take: number,
  ): Promise<User[]> {
    // return await this.userService.findAll({ skip, take });

    // Placeholder implementation
    return [
      {
        id: '1',
        email: 'user1@example.com',
        name: 'User One',
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: '2',
        email: 'user2@example.com',
        name: 'User Two',
        createdAt: new Date(),
        updatedAt: new Date(),
      },
    ];
  }
}
